Source: Internal

Info: This patch makes the changes necessary to support wanboot.
Mostly it removes floating point support.

Status: This patch is Solaris specific.  This will not be sent upstream.

--- gnutls-3.6.14/gl/printf-args.c	2020-06-03 18:04:20.467785564 +0000
+++ gnutls-3.6.14/gl/printf-args.c	2020-06-03 18:05:12.440620514 +0000
@@ -71,12 +71,14 @@
       case TYPE_ULONGLONGINT:
         ap->a.a_ulonglongint = va_arg (args, unsigned long long int);
         break;
+#ifndef _BOOT
       case TYPE_DOUBLE:
         ap->a.a_double = va_arg (args, double);
         break;
       case TYPE_LONGDOUBLE:
         ap->a.a_longdouble = va_arg (args, long double);
         break;
+#endif /* !_BOOT */
       case TYPE_CHAR:
         ap->a.a_char = va_arg (args, int);
         break;
--- gnutls-3.4.6/src/gl/timespec.h 2015-01-19 09:38:09.000000000 -0800
+++ gnutls-3.4.6/src/gl/timespec.h 2015-12-10 17:47:59.802282095 -0800
@@ -97,12 +97,14 @@
 struct timespec dtotimespec (double)
   _GL_ATTRIBUTE_CONST;
 
+#ifndef _BOOT
 /* Return an approximation to A, of type 'double'.  */
 _GL_TIMESPEC_INLINE double
 timespectod (struct timespec a)
 {
   return a.tv_sec + a.tv_nsec / 1e9;
 }
+#endif /* !_BOOT */
 
 void gettime (struct timespec *);
 int settime (struct timespec const *);
--- gnutls-3.6.14/src/gl/printf-args.c	2020-06-03 18:07:30.035703021 +0000
+++ gnutls-3.6.14/src/gl/printf-args.c	2020-06-03 18:09:16.878002247 +0000
@@ -71,12 +71,14 @@
       case TYPE_ULONGLONGINT:
         ap->a.a_ulonglongint = va_arg (args, unsigned long long int);
         break;
+#ifndef _BOOT
       case TYPE_DOUBLE:
         ap->a.a_double = va_arg (args, double);
         break;
       case TYPE_LONGDOUBLE:
         ap->a.a_longdouble = va_arg (args, long double);
         break;
+#endif /* !_BOOT */
       case TYPE_CHAR:
         ap->a.a_char = va_arg (args, int);
         break;
