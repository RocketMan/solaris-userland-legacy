#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#
#
# Copyright (c) 2018, 2020, Oracle and/or its affiliates.
#
<transform dir file link hardlink path=usr/share/doc/.* -> drop>
<transform file path=usr.*/man/.+ -> default mangler.man.stability volatile>
# Add arch variant tags to all architecture specific paths. We can't do the
# ones in /usr/lib because there's no way to tell by pathname (hashes aren't
# shared between sparc and x86).
<transform file path=usr/lib/rustlib/sparcv9.* -> add variant.arch sparc>
<transform file path=usr/lib/rustlib/x86_64.* -> add variant.arch i386>

<include build/libraries-hashed.$(MACH64)>
set name=pkg.fmri \
    value=pkg:/developer/rust/rustc@$(IPS_COMPONENT_VERSION),$(BUILD_VERSION)
set name=pkg.summary value="Rust compiler"
# Everything here is 64-bit, but we don't attempt to put anything into a
# 64-bit directory. Silence the warnings and errors we get because of it.
set name=pkg.linted.userland.action001.2 value=true
set name=pkg.linted.userland.action001.3 value=true
set name=com.oracle.info.description \
    value="The Rust compiler and standard libraries"
set name=info.classification \
    value="org.opensolaris.category.2008:Development/Other Languages"
set name=info.source-url value=$(COMPONENT_ARCHIVE_URL)
set name=info.upstream-url value=$(COMPONENT_PROJECT_URL)
set name=org.opensolaris.arc-caseid value=PSARC/2018/120
set name=org.opensolaris.consolidation value=$(CONSOLIDATION)
#
file path=usr/bin/rust-gdb
file path=usr/bin/rust-gdbgui
file path=usr/bin/rustc
file path=usr/lib/rustlib/components
file path=usr/lib/rustlib/etc/gdb_load_rust_pretty_printers.py
file path=usr/lib/rustlib/etc/gdb_lookup.py
file path=usr/lib/rustlib/etc/gdb_providers.py
file path=usr/lib/rustlib/etc/lldb_commands
file path=usr/lib/rustlib/etc/lldb_lookup.py
file path=usr/lib/rustlib/etc/lldb_providers.py
file path=usr/lib/rustlib/etc/rust_types.py
file path=usr/lib/rustlib/rust-installer-version
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libaddr2line-05080969138ee097.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libadler-82613aab1bf0ba51.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/liballoc-8ef769527831ed6b.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcfg_if-c419f4335acb2031.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcompiler_builtins-8353be641f170b62.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcore-e7b5317a943bb0f1.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libgetopts-c86fa63b143c3820.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libgimli-4d840b797fdccfce.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libhashbrown-87be5ddf4a525b00.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/liblibc-cfaf2280149fee2c.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libmemchr-02ac39226a62d78c.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libminiz_oxide-79637979e62948fb.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libobject-24d4f37de35566bd.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libpanic_abort-4bf58fed7d82891f.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libpanic_unwind-df7f1fc7cda96cbd.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libproc_macro-8f9b19724eff4075.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_demangle-8ab709d6aadc8895.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_alloc-8dd0af8962bd7fd4.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_core-d02ba593eae95e69.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_std-d37efc4b2f94594e.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd-fc130e56a73b9489.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd-fc130e56a73b9489.so
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd_detect-94bb863fcb0a4479.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libsysroot-476e4083b6f296e5.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libtest-14db8308d2021643.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libtest-14db8308d2021643.so
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libunicode_width-7341b2010d6760d3.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libunwind-0b6e9914016d30c8.rlib
file path=usr/share/doc/rust/COPYRIGHT
file path=usr/share/doc/rust/LICENSE-APACHE
file path=usr/share/doc/rust/LICENSE-APACHE.old
file path=usr/share/doc/rust/LICENSE-MIT
file path=usr/share/doc/rust/LICENSE-MIT.old
file path=usr/share/doc/rust/LICENSE-THIRD-PARTY
file path=usr/share/doc/rust/README.md
file path=usr/share/doc/rust/README.md.old
file path=usr/share/man/man1/rustc.1
file path=usr/share/man/man1/rustdoc.1
#
license rust.license license=Apachev2.0
# rustc currently depends on gcc to perform its linking, and that's
# something that pkgdepend can't figure out.
depend type=require fmri=developer/gcc/gcc-c
