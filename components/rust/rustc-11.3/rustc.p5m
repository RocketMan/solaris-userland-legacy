#
# CDDL HEADER START
#
# The contents of this file are subject to the terms of the
# Common Development and Distribution License (the "License").
# You may not use this file except in compliance with the License.
#
# You can obtain a copy of the license at usr/src/OPENSOLARIS.LICENSE
# or http://www.opensolaris.org/os/licensing.
# See the License for the specific language governing permissions
# and limitations under the License.
#
# When distributing Covered Code, include this CDDL HEADER in each
# file and include the License file at usr/src/OPENSOLARIS.LICENSE.
# If applicable, add the following below this CDDL HEADER, with the
# fields enclosed by brackets "[]" replaced with your own identifying
# information: Portions Copyright [yyyy] [name of copyright owner]
#
# CDDL HEADER END
#
#
# Copyright (c) 2018, 2020, Oracle and/or its affiliates.
#
<transform dir file link hardlink path=usr/share/doc/.* -> drop>
<transform file path=usr.*/man/.+ -> default mangler.man.stability volatile>
# Add arch variant tags to all architecture specific paths. We can't do the
# ones in /usr/lib because there's no way to tell by pathname (hashes aren't
# shared between sparc and x86).
<transform file path=usr/lib/rustlib/sparcv9.* -> add variant.arch sparc>
<transform file path=usr/lib/rustlib/x86_64.* -> add variant.arch i386>

<include build/libraries-hashed.$(MACH64)>
set name=pkg.fmri \
    value=pkg:/developer/rust/rustc@$(IPS_COMPONENT_VERSION),$(BUILD_VERSION)
set name=pkg.summary value="Rust compiler"
# Everything here is 64-bit, but we don't attempt to put anything into a
# 64-bit directory. Silence the warnings and errors we get because of it.
set name=pkg.linted.userland.action001.2 value=true
set name=pkg.linted.userland.action001.3 value=true
set name=com.oracle.info.description \
    value="The Rust compiler and standard libraries"
set name=info.classification \
    value="org.opensolaris.category.2008:Development/Other Languages"
set name=info.source-url value=$(COMPONENT_ARCHIVE_URL)
set name=info.upstream-url value=$(COMPONENT_PROJECT_URL)
set name=org.opensolaris.arc-caseid value=PSARC/2018/120
set name=org.opensolaris.consolidation value=$(CONSOLIDATION)
#
file path=usr/bin/rust-gdb
file path=usr/bin/rust-gdbgui
file path=usr/bin/rustc
file path=usr/lib/rustlib/components
file path=usr/lib/rustlib/etc/gdb_load_rust_pretty_printers.py
file path=usr/lib/rustlib/etc/gdb_lookup.py
file path=usr/lib/rustlib/etc/gdb_providers.py
file path=usr/lib/rustlib/etc/lldb_commands
file path=usr/lib/rustlib/etc/lldb_lookup.py
file path=usr/lib/rustlib/etc/lldb_providers.py
file path=usr/lib/rustlib/etc/rust_types.py
file path=usr/lib/rustlib/rust-installer-version
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libaddr2line-28a700f2a6859e24.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libadler-b359326d4d53086b.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/liballoc-a5eef31550dc6705.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcfg_if-f456cd8961783e30.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcompiler_builtins-486db4549113cc78.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libcore-fac390140019f77d.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libgetopts-7e38a8f184ab9b52.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libgimli-1fde24eb4607ccb3.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libhashbrown-253cc656680f00e7.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/liblibc-7dbea4219972af73.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libmemchr-9d7b6933591b2d35.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libminiz_oxide-6de596d8e042eae1.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libobject-6d291b7ba9d16dae.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libpanic_abort-f3efe67e401e4af1.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libpanic_unwind-d5834947f56bb853.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libproc_macro-a044777bc51470b3.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_demangle-5e439a418347bf8f.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_alloc-7272efa71d43f1e3.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_core-40623f19d43dfcdc.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/librustc_std_workspace_std-f05fcb837f77d0ef.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd-9c08c75ad9ca0368.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd-9c08c75ad9ca0368.so
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libstd_detect-33b8d94b024f9249.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libsysroot-dd486de60805ca23.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libtest-4fb66f6ff32eb200.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libtest-4fb66f6ff32eb200.so
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libunicode_width-59d4ffc85663c296.rlib
file path=usr/lib/rustlib/x86_64-pc-solaris/lib/libunwind-a124816d1101f704.rlib
file path=usr/share/doc/rust/COPYRIGHT
file path=usr/share/doc/rust/LICENSE-APACHE
file path=usr/share/doc/rust/LICENSE-APACHE.old
file path=usr/share/doc/rust/LICENSE-MIT
file path=usr/share/doc/rust/LICENSE-MIT.old
file path=usr/share/doc/rust/LICENSE-THIRD-PARTY
file path=usr/share/doc/rust/README.md
file path=usr/share/doc/rust/README.md.old
file path=usr/share/man/man1/rustc.1
file path=usr/share/man/man1/rustdoc.1
#
license rust.license license=Apachev2.0
# rustc currently depends on gcc to perform its linking, and that's
# something that pkgdepend can't figure out.
depend type=require fmri=developer/gcc/gcc-c
