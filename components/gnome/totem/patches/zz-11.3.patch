--- a/configure	2017-03-20 12:14:34.000000000 +0000
+++ b/configure	2018-09-18 12:03:03.418991083 +0000
@@ -20397,12 +20397,12 @@
     pkg_cv_PLAYER_CFLAGS="$PLAYER_CFLAGS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$BACKEND_MODULES glib-2.0 >= \$GLIB_REQS gio-2.0 >= \$GIO_REQS gtk+-3.0 >= \$GTK_REQS gdk-x11-3.0 >= \$GTK_REQS gmodule-2.0 totem-plparser >= \$TOTEM_PLPARSER_REQS libpeas-1.0 >= \$PEAS_REQS libpeas-gtk-1.0 >= \$PEAS_REQS \$PYTHON_MODULES grilo-0.3 >= \$GRILO_REQS grilo-pls-0.3 >= \$GRILO_REQS gnome-desktop-3.0\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$BACKEND_MODULES glib-2.0 >= \$GLIB_REQS gio-2.0 >= \$GIO_REQS gtk+-3.0 >= \$GTK_REQS gdk-x11-3.0 >= \$GTK_REQS gmodule-2.0 totem-plparser >= \$TOTEM_PLPARSER_REQS libpeas-1.0 >= \$PEAS_REQS libpeas-gtk-1.0 >= \$PEAS_REQS \$PYTHON_MODULES grilo-0.3 >= \$GRILO_REQS grilo-pls-0.3 >= \$GRILO_REQS \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_PLAYER_CFLAGS=`$PKG_CONFIG --cflags "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0" 2>/dev/null`
+  pkg_cv_PLAYER_CFLAGS=`$PKG_CONFIG --cflags "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -20414,12 +20414,12 @@
     pkg_cv_PLAYER_LIBS="$PLAYER_LIBS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$BACKEND_MODULES glib-2.0 >= \$GLIB_REQS gio-2.0 >= \$GIO_REQS gtk+-3.0 >= \$GTK_REQS gdk-x11-3.0 >= \$GTK_REQS gmodule-2.0 totem-plparser >= \$TOTEM_PLPARSER_REQS libpeas-1.0 >= \$PEAS_REQS libpeas-gtk-1.0 >= \$PEAS_REQS \$PYTHON_MODULES grilo-0.3 >= \$GRILO_REQS grilo-pls-0.3 >= \$GRILO_REQS gnome-desktop-3.0\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\$BACKEND_MODULES glib-2.0 >= \$GLIB_REQS gio-2.0 >= \$GIO_REQS gtk+-3.0 >= \$GTK_REQS gdk-x11-3.0 >= \$GTK_REQS gmodule-2.0 totem-plparser >= \$TOTEM_PLPARSER_REQS libpeas-1.0 >= \$PEAS_REQS libpeas-gtk-1.0 >= \$PEAS_REQS \$PYTHON_MODULES grilo-0.3 >= \$GRILO_REQS grilo-pls-0.3 >= \$GRILO_REQS \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_PLAYER_LIBS=`$PKG_CONFIG --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0" 2>/dev/null`
+  pkg_cv_PLAYER_LIBS=`$PKG_CONFIG --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS " 2>/dev/null`
 		      test "x$?" != "x0" && pkg_failed=yes
 else
   pkg_failed=yes
@@ -20440,14 +20440,14 @@
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        PLAYER_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0" 2>&1`
+	        PLAYER_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors --cflags --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS" 2>&1`
         else
-	        PLAYER_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0" 2>&1`
+	        PLAYER_PKG_ERRORS=`$PKG_CONFIG --print-errors --cflags --libs "$BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$PLAYER_PKG_ERRORS" >&5
 
-	as_fn_error $? "Package requirements ($BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS gnome-desktop-3.0) were not met:
+	as_fn_error $? "Package requirements ($BACKEND_MODULES glib-2.0 >= $GLIB_REQS gio-2.0 >= $GIO_REQS gtk+-3.0 >= $GTK_REQS gdk-x11-3.0 >= $GTK_REQS gmodule-2.0 totem-plparser >= $TOTEM_PLPARSER_REQS libpeas-1.0 >= $PEAS_REQS libpeas-gtk-1.0 >= $PEAS_REQS $PYTHON_MODULES grilo-0.3 >= $GRILO_REQS grilo-pls-0.3 >= $GRILO_REQS) were not met:
 
 $PLAYER_PKG_ERRORS
 
--- a/src/icon-helpers.c	2017-01-16 13:17:20.000000000 +0000
+++ b/src/icon-helpers.c	2018-09-18 11:40:23.353449727 +0000
@@ -28,7 +28,12 @@
 #include <icon-helpers.h>
 
 #define GNOME_DESKTOP_USE_UNSTABLE_API 1
+#ifdef SOLARIS_11_3
+#include "gnome-desktop-thumbnail.c"
+#include "gnome-thumbnail-pixbuf-utils.c"
+#else
 #include <libgnome-desktop/gnome-desktop-thumbnail.h>
+#endif
 
 #define DEFAULT_MAX_THREADS   1
 #define THUMB_SEARCH_SIZE     256
