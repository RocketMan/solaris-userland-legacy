--- a/src/window.vala	2015-06-21 16:57:54.000000000 +0000
+++ b/src/window.vala	2018-11-24 12:43:19.506899419 +0000
@@ -158,7 +158,9 @@
 
     protected override bool configure_event (Gdk.EventConfigure event) {
         if (get_realized () && !(Gdk.WindowState.MAXIMIZED in get_window ().get_state ())) {
-            settings.set ("size", "(ii)", event.width, event.height);
+            int width, height;
+            get_size (out width, out height);
+            settings.set ("size", "(ii)", width, height);
         }
 
         return base.configure_event (event);
--- a/src/window.c	2015-09-21 16:15:57.000000000 +0000
+++ b/src/window.c	2018-11-24 12:45:00.057706585 +0000
@@ -839,17 +839,20 @@
 		_tmp0_ = FALSE;
 	}
 	if (_tmp0_) {
-		GSettings* _tmp4_ = NULL;
-		GdkEventConfigure* _tmp5_ = NULL;
-		gint _tmp6_ = 0;
-		GdkEventConfigure* _tmp7_ = NULL;
-		gint _tmp8_ = 0;
-		_tmp4_ = self->priv->settings;
-		_tmp5_ = event;
-		_tmp6_ = _tmp5_->width;
-		_tmp7_ = event;
-		_tmp8_ = _tmp7_->height;
-		g_settings_set (_tmp4_, "size", "(ii)", _tmp6_, _tmp8_);
+		gint width = 0;
+		gint height = 0;
+		gint _tmp4_ = 0;
+		gint _tmp5_ = 0;
+		GSettings* _tmp6_;
+		gint _tmp7_;
+		gint _tmp8_;
+		gtk_window_get_size ((GtkWindow*) self, &_tmp4_, &_tmp5_);
+		width = _tmp4_;
+		height = _tmp5_;
+		_tmp6_ = self->priv->settings;
+		_tmp7_ = width;
+		_tmp8_ = height;
+		g_settings_set (_tmp6_, "size", "(ii)", _tmp7_, _tmp8_);
 	}
 	_tmp9_ = event;
 	_tmp10_ = GTK_WIDGET_CLASS (clocks_window_parent_class)->configure_event ((GtkWidget*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_application_window_get_type (), GtkApplicationWindow), _tmp9_);
